struct Array<Element> {
	let count: Int
	let capacity: Int
	let storage: RawPtr

	init(capacity: Int) {
		self.capacity = capacity
		self.count = 0
		self.storage = @_ir { %? = alloc Element %0 }
	}

	func get(index: Int) -> Optional<Element> {
		if index >= self.count {
			return Optional.none
		}

		let ptr = self.storage
		let res: Element = @_ir(ptr) { %? = load Element $0 }
		res
	}
}
